var j=jQuery.noConflict();(function(a){j(document).on("ready",function(){j(".page-scroll").on("click",function(c){c.preventDefault();var b=j(this);j("html, body").stop().animate({scrollTop:j(b.attr("href")).offset().top,},2000,"easeInOutExpo");
});j("#modal-register-user").on("hide.bs.modal",function(b){j(".register_user").bootstrapValidator("resetForm",true);j("#user_term").removeAttr("checked");
if(j("#user_term").next().hasClass("text-danger")){j("#user_term").next().removeClass("text-danger");}});j("#datetimepicker-birthday").datetimepicker();
j(".register_user").bootstrapValidator({feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},live:"enabled",fields:{user_name:{validators:{notEmpty:{message:"Campo requerido"},regexp:{regexp:/^[a-zA-ZñÑ\s\W]/,message:"Sólo puede contener caracteres alfabeticos"}}},user_email:{validators:{notEmpty:{message:"Campo requerido"},emailAddress:{message:"Email no es válido"}}},user_birthday:{validators:{notEmpty:{message:"Debe indicar fecha"},date:{format:"YYYY/MM/DD",message:"Fecha no válida",}}},user_term:{validators:{choice:{min:1,max:1,message:"Marcar si está de acuerdo con los términos y condiciones"}}}},}).on("error.field.bv",function(d,b){var c=d.target;
j('small.help-block[data-bv-result="INVALID"]').addClass("hide");}).on("success.form.bv",function(k){k.preventDefault();spinner.spin(target);var i=j(this);
var c=j(k.target);var b=c.serializeArray();var g=b[0].value;var f=b[1].value;var d=b[2].value;var h=b[3].value;if(b.length==4){spinner.stop();j("#user_term").next().addClass("text-danger");
return;}j.post(_root_+"portada/registerUser",{token:g,user_name:f,user_email:d,user_birthday:h,},function(e){j("#modal-register-user").modal("hide");spinner.stop();
if(e==="1"){alert("Se registró correctamente su cuenta. Por favor verifica tu cuenta de email para activar tu cuenta.");}else{if(e==="2"){alert("Se registró pero no pudimos enviar el correo de verificación. Vuelve a registrarte.");
}else{if(e==="3"){alert("Hemos actualizado tus datos con tu cuenta de facebook. Por favor logueate con cualquier de los dos modos.");}else{if(e==="4"){alert("Se registró correctamente su cuenta. Por favor verifica tu cuenta de email para activar tu cuenta.");
window.location=_root_;}else{alert("No pudimos registrar tu cuenta por favor vuelva a intentarlo.");}}}}});});j("#datetimepicker-birthday").on("dp.change dp.show",function(b){j(".register_user").formValidation("revalidateField","user_birthday");
});j("#user_birthday").on("focusout",function(){j(".register_user").formValidation("revalidateField","user_birthday");});j("#user_term").on("click",function(c){var b=j(this).next();
if(b.hasClass("text-danger")){b.removeClass("text-danger");}if(j(".register_user").data("bootstrapValidator").isValid()){j("#btn_register_user").removeAttr("disabled");
}});j("#modal-register-password").on("shown.bs.modal",function(b){j("#user_password").focus();});j("#modal-register-password").modal("show");j(".register_password").bootstrapValidator({feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},live:"enabled",fields:{user_password:{validators:{notEmpty:{message:"Campo requerido"},stringLength:{min:6,max:30,message:"Este campo debe contener entre 6 y 30 caracteres"},}},user_repassword:{validators:{notEmpty:{message:"Campo equerido"},stringLength:{min:6,max:30,message:"Este campo debe contener entre 6 y 30 caracteres"},identical:{field:"user_password",message:"Las contraseñas no coinciden"}}},},}).on("success.form.bv",function(i){i.preventDefault();
spinner.spin(target);var h=j(this);var c=j(i.target);var b=c.serializeArray();var f=b[0].value;var d=b[1].value;var g=b[2].value;var k=b[3].value;j.post(_root_+"portada/registerPassUser",{token:f,user_id:k,user_password:d,user_repassword:g},function(e){spinner.stop();
if(e){j("#modal-register-password").modal("hide");j.post(_root_+"portada/loginJs",{id:k,pass:d},function(l){if(l){window.location=_root_+"reminders";}else{window.location=_root_;
}});}else{j(".register_password").bootstrapValidator("resetForm",true);alert("Por favor vuelve a ingresar tu password.");}});});j("#link-create-account").on("click",function(b){b.preventDefault();
j("#modal-login-user").modal("hide");j("#modal-register-user").modal("show");});j(".login_user").bootstrapValidator({feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},live:"enabled",fields:{login_email:{validators:{notEmpty:{message:"Campo requerido"},emailAddress:{message:"Email no es válido"}}},login_password:{validators:{notEmpty:{message:"Campo requerido"},stringLength:{min:6,max:30,message:"Este campo debe contener entre 6 y 30 caracteres"},}},},});
j("#modal-login-user").on("hide.bs.modal",function(b){j(".login_user").bootstrapValidator("resetForm",true);});j("#modal-login-user").on("shown.bs.modal",function(b){j("#login_email").focus();
});j("#modal-register-user").on("shown.bs.modal",function(b){j("#user_name").focus();});});})(jQuery);