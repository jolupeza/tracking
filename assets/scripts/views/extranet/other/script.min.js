var j=jQuery.noConflict();(function(b){var a=j("body");j(document).on("ready",function(){j(".main__grid__content").load(_root_+"extranet/advertising/displayAjax");
j("[name='publi_status']").bootstrapSwitch({size:"small",onColor:"success",radioAllOff:true});j(document).on("click",".pagination-digg li a",function(d){d.preventDefault();
spinner.spin(target);var c=j(this).attr("href");j(".main__grid__content").load(c);spinner.stop();});j(document).on("click",".link-ajax",function(d){d.preventDefault();
spinner.spin(target);var c=j(this).attr("href");j(".main__grid__content").load(c);spinner.stop();});j(document).on("click","#js-advertising-search",function(e){e.preventDefault();
var c=j(this).data("href");var d=j("#js-advertising-search-text").val();if(d.length==0){j("#js-advertising-search-text").focus();return;}j(".main__grid__content").load(c+encodeURI(d));
});j(document).on("keypress","#js-advertising-search-text",function(e){if(e.which==13){e.preventDefault();var c=j(this).data("href");var d=j(this).val();
if(d.length==0){j(this).focus();return;}j(".main__grid__content").load(c+encodeURI(d));}});a.on("change","#js-advertising-rows",function(e){var f=j(this).val();
var c=j(this).data("href");var d=c.split("/");spinner.spin(target);if(f=="all"){href_new=_root_+d[3]+"/"+d[4]+"/"+d[5]+"/"+d[6]+"/"+d[7]+"/"+d[8]+"/"+0+"/"+d[10];
}else{href_new=_root_+d[3]+"/"+d[4]+"/"+d[5]+"/"+d[6]+"/"+d[7]+"/"+d[8]+"/"+f+"/"+d[10];}spinner.stop();j(".main__grid__content").load(href_new);});j("#js-frm-add-publi").bootstrapValidator({feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},live:"enabled",fields:{publi_name:{validators:{notEmpty:{message:"Campo requerido"}}},publi_url:{validators:{uri:{message:"El enlace no es válido"}}},},}).on("success.form.bv",function(l){l.preventDefault();
spinner.spin(target);var k=j(this);var d=j(l.target);var c=d.serializeArray();var i=c[0].value;var h=c[1].value;var g=c[2].value;var f=c[3].value;j.post(_root_+"extranet/advertising/add",{token:i,name:h,url:g,avatar:f},function(e){spinner.stop();
if(e.valid){j(".main__grid__content").load(_root_+"extranet/advertising/displayAjax");j("#publi_name").val("");j("#fieldID").val("");j("#js-wrapper-avatar").addClass("hidden").find("img").attr("src","");
j("#js-frm-add-publi").bootstrapValidator("resetForm",true);jAlert("Se agregó correctamente la publicidad.","Aviso");}else{jAlert("No se agregó la publicidad. Por favor vuelva a intentarlo.","Aviso");
}},"json");});j("#js-frm-edit-publi").bootstrapValidator({feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},live:"enabled",fields:{publi_name:{validators:{notEmpty:{message:"Campo requerido"}}},publi_url:{validators:{uri:{message:"El enlace no es válido"}}},},});
a.on("click",".js-del-advertising",function(c){c.preventDefault();spinner.spin(target);var d=j(this);jConfirm("¿Desea eliminar el registro?","Confirmar eliminación",function(e){if(e){var f=d.data("id");
j.post(_root_+"extranet/advertising/delete",{id:f},function(g){if(g.result){jAlert("Se eliminó correctamente el registro","Aviso");j(".main__grid__content").load(_root_+"extranet/advertising/displayAjax");
}else{jAlert("No se pudo eliminar el registro. Por favor vuelva a intentarlo","Aviso");}},"json");}spinner.stop();});});a.on("click","#js-public-active",function(c){spinner.spin(target);
var d=j(this);var e=d.val();b.post(_root_+"extranet/advertising/activePubli",{id:e},function(f){spinner.stop();if(f.result){j(".main__grid__content").load(_root_+"extranet/advertising/displayAjax");
jAlert("Se cambió la publicidad activa.","Aviso");}else{jAlert("No se pudo cambiar la publicidad activa. Por favor vuelva a intentarlo.","Aviso");}},"json");
});j(".iframe-btn").fancybox({width:880,minHeight:500,type:"iframe",autoScale:false,topRatio:0.3,beforeClose:function(){imgUrl=j("#fieldID").val();if(imgUrl.length>0){figure=j(".thumbnails");
if(figure.hasClass("hidden")){figure.removeClass("hidden");}figure.find("img").attr("src",imgUrl);}}});j("#js-remove-avatar").on("click",function(d){d.preventDefault();
var c=j(".thumbnails");j("#fieldID").val("");c.find("img").attr("src","").parent().addClass("hidden");j(".iframe-btn").removeClass("hidden");});});})(jQuery);
