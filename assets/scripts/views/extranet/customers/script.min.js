var j=jQuery.noConflict();(function(a){j(document).on("ready",function(){j(".main__grid__content").load(_root_+"extranet/customers/displayAjax");j(document).on("click",".pagination-digg li a",function(c){c.preventDefault();
spinner.spin(target);var b=j(this).attr("href");j(".main__grid__content").load(b);spinner.stop();});j(document).on("click",".link-ajax",function(c){c.preventDefault();
spinner.spin(target);var b=j(this).attr("href");j(".main__grid__content").load(b);spinner.stop();});j(document).on("click","#js-customer-search",function(d){d.preventDefault();
var b=j(this).data("href");var c=j("#js-customer-search-text").val();if(c.length==0){j("#js-customer-search-text").focus();return;}j(".main__grid__content").load(b+encodeURI(c));
});j(document).on("keypress","#js-customer-search-text",function(d){if(d.which==13){d.preventDefault();var b=j(this).data("href");var c=j(this).val();if(c.length==0){j(this).focus();
return;}j(".main__grid__content").load(b+encodeURI(c));}});j("body").on("change","#js-customer-rows",function(d){var e=j(this).val();var b=j(this).data("href");
var c=b.split("/");spinner.spin(target);if(e=="all"){href_new=_root_+c[4]+"/"+c[5]+"/"+c[6]+"/"+c[7]+"/"+c[8]+"/"+c[9]+"/"+0+"/"+c[11];}else{href_new=_root_+c[4]+"/"+c[5]+"/"+c[6]+"/"+c[7]+"/"+c[8]+"/"+c[9]+"/"+e+"/"+c[11];
}spinner.stop();j(".main__grid__content").load(href_new);});j("#js-frm-add-customer").bootstrapValidator({feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},live:"enabled",fields:{customer_name:{validators:{notEmpty:{message:"Campo requerido"}}},customer_email:{validators:{notEmpty:{message:"Campo requerido"},emailAddress:{message:"Email no es válido"}}},customer_contact:{validators:{notEmpty:{message:"Campo requerido"}}},customer_ruc:{validators:{notEmpty:{message:"Campo requerido"},numeric:{message:"Sólo puede contener valores numéricos"},stringLength:{min:11,max:11,message:"Debe contener 11 caracteres"}}}},}).on("success.form.bv",function(f){f.preventDefault();
spinner.spin(target);var h=j(this);var m=j(f.target);var l=m.serializeArray();var c=l[0].value;var b=l[1].value;var k=l[2].value;var g=l[3].value;var d=l[4].value;
var i=l[5].value;j.post(_root_+"extranet/customers/add",{token:c,name:b,ruc:k,email:g,contact:d,avatar:i},function(e){spinner.stop();if(e){j(".main__grid__content").load(_root_+"extranet/customers/displayAjax");
j("#customer_name").val("");j("#customer_email").val("");j("#customer_contact").val("");jAlert("Se agregó correctamente el cliente.","Aviso");}else{jAlert("No se agregó el cliente. Por favor vuelva a intentarlo.","Aviso");
}});});j("#js-frm-edit-customer").bootstrapValidator({feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},live:"enabled",fields:{customer_name:{validators:{notEmpty:{message:"Campo requerido"}}},customer_ruc:{validators:{notEmpty:{message:"Campo requerido"},numeric:{message:"Sólo puede contener valores numéricos"},stringLength:{min:11,max:11,message:"Debe contener 11 caracteres"}}},customer_email:{validators:{notEmpty:{message:"Campo requerido"},emailAddress:{message:"Email no es válido"}}},customer_contact:{validators:{notEmpty:{message:"Campo requerido"}}},},});
j("#js-change-pass-customer").on("click",function(c){c.preventDefault();spinner.spin(target);var d=j(this).data("id");var b=j(this).data("email");j.post(_root_+"extranet/customers/changePass",{id:d,email:b},function(e){spinner.stop();
if(e){jAlert("Se cambio el password correctamente","Aviso");}else{jAlert("No se pudo cambiar el password. Por faovor vuelve a intentarlo.","Aviso");}});
});j("body").on("click",".js-del-customer",function(b){b.preventDefault();spinner.spin(target);var c=j(this);jConfirm("¿Desea eliminar el registro?","Confirmar eliminación",function(d){if(d){var e=c.data("id");
j.post(_root_+"extranet/customers/delete",{id:e},function(f){if(f){jAlert("Se eliminó correctamente el registro","Aviso");j(".main__grid__content").load(_root_+"extranet/customers/displayAjax");
}else{jAlert("No se pudo eliminar el registro. Por favor vuelva a intentarlo","Aviso");}});}spinner.stop();});});j(".iframe-btn").fancybox({width:880,minHeight:500,type:"iframe",autoScale:false,topRatio:0.3,beforeClose:function(){imgUrl=j("#fieldID").val();
if(imgUrl.length>0){figure=j(".thumbnails");if(figure.hasClass("hidden")){figure.removeClass("hidden");}figure.find("img").attr("src",imgUrl);}}});j("#js-remove-avatar").on("click",function(c){c.preventDefault();
var b=j(".thumbnails");j("#fieldID").val("");b.find("img").attr("src","").parent().addClass("hidden");j(".iframe-btn").removeClass("hidden");});});})(jQuery);
