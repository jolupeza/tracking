var j=jQuery.noConflict();(function(c){var b=j("body");var a=[];j(document).on("ready",function(){j('input[id^="state-date-"]').each(function(f,g){var h=j(this).attr("id");
h=h.split("-");h=h[h.length-1];a.push(h);});j("#dtp-orderdate").datetimepicker({defaultDate:(j("#dtp-orderdate").data("datetime"))?moment(j("#dtp-orderdate").data("datetime")):"",locale:"es"});
j("#dtp-deliverydate").datetimepicker({defaultDate:(j("#dtp-deliverydate").data("datetime"))?moment(j("#dtp-deliverydate").data("datetime")):"",locale:"es"});
j("#js-frm-order").bootstrapValidator({feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},live:"enabled",fields:{order_title:{validators:{notEmpty:{message:"Campo requerido"}}},order_detail:{validators:{notEmpty:{message:"Campo requerido"}}},order_site:{validators:{notEmpty:{message:"Campo requerido"}}},order_customer:{validators:{callback:{message:"Seleccionar cliente",callback:function(g,f){if(g=="0"){return false;
}return true;}}}},order_date:{validators:{notEmpty:{message:"Debe indicar fecha"},date:{format:"YYYY-MM-DD",message:"Fecha no vÃ¡lida",},callback:{message:"Indicar fecha mayor o igual a la fecha actual y menor a la fecha de entrega",callback:function(l,h,k){var f=new moment(l,"YYYY-MM-DD",true);
var g=moment().format("YYYY-MM-DD");var i=moment(j("#dtp-deliverydate").data("DateTimePicker").date()).format("YYYY-MM-DD");if(i!=="Invalid date"){if(f.unix()>moment(i).unix()){return false;
}}if(!f.isValid()){return false;}if(k.data("edit")==="undefined"){if(f.unix()<moment(g).unix()){return false;}}return true;}}},onSuccess:function(h,g){var f=g.element[0].value;
j(".main__content__observation__article").first().find('input[id^="order_obs_date"]').val(f);j('div[id^="dtp-date-state"]').each(function(i,k){j(this).data("DateTimePicker").minDate(f);
});},onError:function(g,f){j(".main__content__observation__article").first().find('input[id^="order_obs_date"]').val("");j('div[id^="dtp-date-state"]').each(function(h,i){j(this).data("DateTimePicker").minDate(false);
});}},order_deliverydate:{validators:{notEmpty:{message:"Debe indicar fecha"},date:{format:"YYYY-MM-DD",message:"Fecha no vÃ¡lida",},callback:{message:"Indicar fecha mayor o igual a la fecha de pedido",callback:function(k,h){var f=new moment(k,"YYYY-MM-DD",true);
var g=moment().format("YYYY-MM-DD");var i=moment(j("#dtp-orderdate").data("DateTimePicker").date()).format("YYYY-MM-DD");if(i!=="Invalid date"){if(f.unix()<moment(i).unix()){return false;
}}if(!f.isValid()){return false;}if(f.unix()<moment(g).unix()){return false;}return true;}}},onSuccess:function(h,g){var f=g.element[0].value;j(".main__content__observation__article").last().find('div[id^="dtp-date-state-"]').data("DateTimePicker").date(f);
j('div[id^="dtp-date-state"]').each(function(i,k){j(this).data("DateTimePicker").maxDate(f);});},onError:function(g,f){j(".main__content__observation__article").last().find('input[id^="state-date-"]').val("");
j('div[id^="dtp-date-state"]').each(function(h,i){j(this).data("DateTimePicker").maxDate(false);});}}},}).on("success.field.bv",function(g,f){f.fv.disableSubmitButtons(false);
});j("#dtp-orderdate").on("dp.change dp.show",function(f){revalidate("order_date","js-frm-order");revalidate("order_deliverydate","js-frm-order");});j("#dtp-deliverydate").on("dp.change dp.show",function(f){revalidate("order_deliverydate","js-frm-order");
revalidate("order_date","js-frm-order");});j("#order_date").on("focusout",function(){j("#js-frm-order").formValidation("revalidateField","order_date");
j("#js-frm-order").formValidation("revalidateField","order_deliverydate");});j("#order_deliverydate").on("focusout",function(){j("#js-frm-order").formValidation("revalidateField","order_deliverydate");
j("#js-frm-order").formValidation("revalidateField","order_date");});a.forEach(d);a.forEach(e);function d(g,f,h){j("#dtp-date-state-"+g).on("dp.change dp.show",function(k){var i=moment(j("#state-date-"+g).val()).format("YYYY-MM-DD");
j("#order_obs_date_"+h[f+1]).val(i);});}function e(h,g,i){j("#dtp-date-state-"+h).datetimepicker({defaultDate:(j("#dtp-date-state-"+h).data("datetime"))?moment(j("#dtp-date-state-"+h).data("datetime")):""});
if(j("#dtp-orderdate").data("datetime")){var f=j("#dtp-orderdate").data("datetime");j("#dtp-date-state-"+h).data("DateTimePicker").minDate(f);}if(j("#dtp-deliverydate").data("datetime")){var f=j("#dtp-deliverydate").data("datetime");
j("#dtp-date-state-"+h).data("DateTimePicker").maxDate(f);}}});})(jQuery);function revalidate(b,a){j("#"+a).formValidation("revalidateField",b);}