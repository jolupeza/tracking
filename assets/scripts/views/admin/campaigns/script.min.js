var j=jQuery.noConflict();(function(a){j(document).on("ready",function(){j(".content").load(_root_+"admin/campaigns/displayAjax");j("#datetimepicker-add").datetimepicker({defaultDate:moment()});
j("#datetimepicker-edit").datetimepicker({defaultDate:moment(j("#datetimepicker-edit").data("datetime"))});j(document).on({mouseenter:function(){j(this).find(".opt-post").show();
},mouseleave:function(){j(this).find(".opt-post").hide();}},".view-option-post");j(document).on("click",".pagination-digg li a",function(d){d.preventDefault();
var c=j(this).attr("href");j(".content").load(c);});j(document).on("click",".link-ajax",function(d){d.preventDefault();var c=j(this).attr("href");j(".content").load(c);
});j(document).on("click","#goto-btn",function(g){g.preventDefault();var f=parseInt(j(".goto").val());var c=parseInt(j(this).data("maxpage"));if(f>0&&f<=c){var e=j(this).data("href");
var d=(f-1)*parseInt(j(this).data("limit"));j(".content").load(e+d);}else{return false;}});j(document).on("click","#search-btn",function(e){e.preventDefault();
var c=j(this).data("href");var d=j(this).parent().prev().val();j(".content").load(c+d);});j("[name='status']").bootstrapSwitch({size:"small",onColor:"success",radioAllOff:true});
j("body").on("click",".ico-action",function(e){e.preventDefault();var c=j(this).data("status");var f=j(this).data("id");var d=j(this).data("return");spinner.spin(target);
j.post(_root_+"admin/campaigns/action",{status:c,id:f},function(g){spinner.stop();if(g){j(".content").load(_root_+d);}});});j("body").on("click",".ico-status",function(d){d.preventDefault();
var c=j(this).data("status");c=(c=="1")?0:1;var e=j(this).data("id");spinner.spin(target);j.post(_root_+"admin/campaigns/action",{id:e,status:c},function(f){spinner.stop();
if(f){j(".content").load(_root_+"admin/campaigns/displayAjax");}});});j("body").on("click",".ico-del",function(c){c.preventDefault();var d=j(this).data("id");
spinner.spin(target);jConfirm("¿Desea eliminar este registro?","¡Eliminación!",function(e){if(e){j.post(_root_+"admin/campaigns/delete",{id:d},function(f){spinner.stop();
if(f){j(".content").load(_root_+"admin/campaigns/displayAjax");jAlert("¡Se eliminó correctamente la campaña!","Aviso");}else{jAlert("¡No se pudo eliminar la campaña. Por favor vuelva a intentarlo!","Aviso");
}});}else{spinner.stop();}});});j('input[name="lists"]').on("click",function(){if(j(this).val()=="2"){if(j(this).data("id")){j.post(_root_+"admin/campaigns/getLists",{id:j(this).data("id")},function(c){if(c){j.each(c,function(d,e){j('input[name="list[]"]').each(function(){if(j(this).val()==e.list_id){j(this).prop("checked",true);
}});});}},"json");}j(".check-lists").css({display:"block"});}else{j('input[name="list[]"]').each(function(){j(this).prop("checked",false);});j(".check-lists").css({display:"none"});
}});if(j("#display-lists").is(":checked")){var b=j("#display-lists").data("id");j.post(_root_+"admin/campaigns/getLists",{id:b},function(c){if(c){j.each(c,function(d,e){j('input[name="list[]"]').each(function(){if(j(this).val()==e.list_id){j(this).prop("checked",true);
}});});}},"json");j(".check-lists").css({display:"block"});}j("#send_camp").on("click",function(c){c.preventDefault();var d=j(this).data("id");spinner.spin(target);
j.post(_root_+"admin/campaigns/send",{id:d},function(e){if(e){spinner.stop();if(e.length>0){jAlert("No se pudo entregar el correo a algunos suscriptores.","Aviso");
console.log(e);}else{jAlert("Se entregó la campaña satisfactoriamente.","Aviso");}}else{spinner.stop();}},"json");});});})(jQuery);